<!doctype html>
<html>
<head>
  <meta charset="utf-8" />
  <script src="https://challenges.cloudflare.com/turnstile/v0/api.js?render=explicit"></script>
</head>
<body>
<div id="c"></div>
<script>
  turnstile.ready(() => {
    const wid = turnstile.render("#c", {
      sitekey: "0x4AAAAAACHJ5X5WghmT8crG",
      callback: (token) => {
        // отправляем токен родителю
        console.log('TOKEN: ' + token);
        window.parent.postMessage({ type: "TURNSTILE_TOKEN", token }, "*");
      },
      "error-callback": (e) => {
        window.parent.postMessage({ type: "TURNSTILE_ERROR", error: e }, "*");
      }
    });
    // старт по требованию можно сделать через message, см. ниже
  });

  window.addEventListener("message", (e) => {
    if (e.data?.type === "TURNSTILE_EXECUTE") {
      turnstile.execute("#c");
    }
  });
</script>
</body>
</html>
