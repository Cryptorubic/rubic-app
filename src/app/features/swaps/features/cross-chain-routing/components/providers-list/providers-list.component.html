<tui-loader [showLoader]="(providers$ | async).length === 0" [overlay]="true">
  <ul *ngIf="providers$ | async as providers">
    <ng-container *ngFor="let provider of providers$ | async; let i = index">
      <li
        class="provider"
        [ngClass]="{
          provider_selected:
            (selectedProvider$ | async) === provider.tradeType ||
            ((selectedProvider$ | async) === null && i === 0)
        }"
        (click)="selectProvider(provider?.tradeType)"
      >
        <app-smart-routing
          *ngIf="(smartRoutingList$ | async)?.[i] as smartRouting"
          [smartRouting]="smartRouting"
        ></app-smart-routing>

        <span>
          {{
            provider.trade?.to?.tokenAmount
              | bigNumberFormat
              | withRound: 'toClosestValue':{ decimals: provider.trade?.to?.decimals }
          }}
        </span>

        <div class="provider__statuses">
          <tui-badge *ngIf="i === 0" status="success" value="Best"></tui-badge>
          <tui-badge
            *ngIf="provider.error"
            status="warning"
            [value]="getMinMaxError(provider)"
          ></tui-badge>
          <tui-badge *ngIf="provider.rank === 0" status="warning" value="Warning"></tui-badge>
        </div>
      </li>
    </ng-container>
  </ul>
</tui-loader>
