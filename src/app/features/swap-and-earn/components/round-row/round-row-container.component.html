<ng-container
  *ngLet="{
    currentTab: currentTab$ | async,
    claimAmount: claimAmount$ | async,
    loading: loading$ | async,
    buttonState: buttonState$ | async
  } as round"
>
  <div class="round round_desktop" *ngIf="!isMobile">
    <div
      class="round__container"
      [ngClass]="{ round__container_disabled: isClosed || isAlreadyClaimed }"
    >
      <div class="round__header">
        <span class="round__number">Round #{{ roundNumber }}</span>
      </div>

      <div class="round__footer">
        <div class="round__info">
          <div class="round__info-date">
            {{ claimData }}
          </div>
          <span class="round__info-amount">
            <img
              class="round__info-amount-icon"
              src="/assets/images/rbc-white.png"
              alt="Confirmed RBC"
            />
            {{ isClosed ? '0' : round.claimAmount }} RBC
          </span>
        </div>
        <tui-loader [showLoader]="round.loading && !isClosed" [overlay]="true">
          <button
            class="round__button"
            tuiButton
            appearance="primary"
            [disabled]="isAlreadyClaimed || isClosed"
            type="button"
            size="m"
            (click)="!isAlreadyClaimed ? handleClick(round.buttonState.label) : null"
            [tuiHint]="isAlreadyClaimed ? hintTemplate : null"
            tuiHintAppearance="onDark"
          >
            {{ isClosed ? 'Closed' : (round.buttonState.translation | translate) }}
          </button>
        </tui-loader>
      </div>
    </div>
  </div>

  <div class="round round_mobile" *ngIf="isMobile">
    <div class="round__container round__container_mobile">
      <div
        class="round__info round__info_mobile"
        [ngClass]="{ round__info_mobile_disabled: isAlreadyClaimed }"
      >
        <div class="round__left round__left_mobile">
          <span
            class="round__round round__round_mobile"
            [ngClass]="{ round__round_mobile_disabled: isAlreadyClaimed }"
            >Round #{{ roundNumber }}</span
          >
          <div
            class="round__date round__date_mobile"
            [ngClass]="{ round__date_mobile_disabled: isAlreadyClaimed }"
          >
            {{ claimData }}
          </div>
        </div>
        <div style="width: 100%">
          <div class="round__amount-wrapper round__amount-wrapper_mobile">
            <span
              class="round__amount round__amount_mobile"
              [ngClass]="{ round__amount_mobile_disabled: isAlreadyClaimed }"
            >
              <img src="/assets/images/rbc-white.png" alt="Confirmed RBC" />
              {{ isClosed ? '0' : round.claimAmount }}
              RBC
            </span>
            <div
              *ngIf="!isClosed"
              class="round__claim-button-icon_mobile"
              [ngClass]="{ 'round__claim-button-icon_mobile_disabled': !isAlreadyClaimed }"
              [inlineSVG]="'assets/images/icons/exclamation-grey.svg'"
              [tuiHint]="isAlreadyClaimed ? hintTemplate : null"
              tuiHintAppearance="onDark"
            ></div>
          </div>

          <div
            class="round__claim-button round__claim-button_mobile"
            (click)="!isAlreadyClaimed ? handleClick(round.buttonState.label) : null"
            [ngClass]="{ 'round__claim-button_mobile_disabled': isAlreadyClaimed }"
          >
            <span>{{ isClosed ? 'Closed' : (round.buttonState.translation | translate) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #hintTemplate>
  <ng-container *ngIf="isAirdropAddressValid$ | async">
    Your tokens have been already claimed, please check your wallet.
  </ng-container>
  <ng-container *ngIf="isRetrodropAddressValid$ | async">
    Your tokens have already been successfully staked. Please review the Staking tab for further
    details.
  </ng-container>
</ng-template>
