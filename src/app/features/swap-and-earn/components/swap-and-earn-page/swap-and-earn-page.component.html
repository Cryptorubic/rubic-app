<ng-container
  *ngLet="{
    points: points$ | async,
    isAirdropAddressValid: isAirdropAddressValid$ | async,
    isRetrodropAddressValid: isRetrodropAddressValid$ | async,
    currentTab: currentTab$ | async,
    workingStatus: workingStatus$ | async,
    treesLoading: treesLoading$ | async
  } as sen"
>
  <app-points-container
    (handleClick)="handleWithdraw($event)"
    [points]="sen.points"
  ></app-points-container>

  <ng-container *ngIf="currentUser$ | async">
    <div
      class="drops"
      *ngIf="
        !sen.treesLoading &&
        ((sen.points.participant && sen.isAirdropAddressValid) || sen.isRetrodropAddressValid)
      "
    >
      <div class="drops__tabs-container">
        <div
          class="drops__tab swap-to-earn-tab"
          [ngClass]="{
            active: sen.currentTab === 'airdrop',
            disabled: !sen.isAirdropAddressValid
          }"
          (click)="sen.isAirdropAddressValid ? switchTab('airdrop') : null"
          [tuiHint]="sen.isAirdropAddressValid ? null : SwapToEarnHint"
          tuiHintAppearance="onDark"
          tuiHintDirection="top-right"
        >
          <span class="drops__tab-text">Swap&Earn</span>
        </div>
        <div
          class="drops__tab retrodrop-tab"
          [ngClass]="{
            active: sen.currentTab === 'retrodrop',
            disabled: !sen.isRetrodropAddressValid
          }"
          (click)="sen.isRetrodropAddressValid ? switchTab('retrodrop') : null"
          [tuiHint]="sen.isRetrodropAddressValid ? null : RetrodropHint"
          tuiHintAppearance="onDark"
          tuiHintDirection="top-right"
        >
          <span class="drops__tab-text">Retrodrop</span>
        </div>
      </div>
      <div
        class="drops__container"
        [ngClass]="{
                  'full-rounded': sen.currentTab === 'retrodrop',
                }"
      >
        <tui-scrollbar>
          <ng-container *ngIf="sen.currentTab === 'airdrop'">
            <app-claim-container *ngIf="sen.isAirdropAddressValid"></app-claim-container>
          </ng-container>
          <ng-container *ngIf="sen.currentTab === 'retrodrop'">
            <app-retrodrop-container *ngIf="sen.isRetrodropAddressValid"></app-retrodrop-container>
          </ng-container>
        </tui-scrollbar>
        <p
          *ngIf="!sen.points.participant && (currentUser$ | async) && sen.currentTab === 'airdrop'"
          class="not-member"
        >
          You are not a member of Swap to Earn program:(
        </p>
      </div>
    </div>
  </ng-container>
  <app-swap-and-earn-faq></app-swap-and-earn-faq>
  <ng-template #noCompany></ng-template>
</ng-container>

<ng-template #SwapToEarnHint>
  <div>
    You are not currently a member of the SwapToEarn program. You can read more about the program
    here:
    <a
      href="https://cryptorubic.medium.com/introducing-swap-to-earn-the-innovative-way-to-earn-crypto-tokens-8aaaa6a73341"
      target="_blank"
      rel="noreferrer"
      >Link</a
    >
  </div>
</ng-template>
<ng-template #RetrodropHint>You are not a participant in the retrodrop.</ng-template>
