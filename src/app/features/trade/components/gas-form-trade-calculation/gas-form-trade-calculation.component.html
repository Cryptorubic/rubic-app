<div
  *ngLet="{ progress: percentsDone$ | async, calculationText: calculationText$ | async } as state"
  class="gas-form-trade"
  [class.gas-form-trade__calculation]="isCalculation"
>
  <app-progress-bar *ngIf="isCalculation" [value]="state.progress" [max]="max"></app-progress-bar>

  <ng-container *ngIf="!isCalculation; else calculatingText">
    <div
      class="gas-form-trade__path"
      [tuiHint]="pathHint"
      tuiHintAppearance="onDark"
      tuiHintDirection="bottom-right"
    >
      <img [src]="providerInfo?.image" width="22" height="22" alt="Provider Logo" />
    </div>
    <app-swap-data-element
      [gasInfo]="gasData"
      [feeInfoChange]="feeInfo"
      [time]="(providerInfo?.averageTime || 3) + ' M'"
      [hintAppearance]="'onDark'"
      [hintDirection]="'bottom-right'"
    ></app-swap-data-element>
  </ng-container>
  <ng-template #calculatingText>
    <span class="gas-form-trade__calculating-text">{{ state.calculationText }}</span>
  </ng-template>
</div>

<ng-template #pathHint>
  <app-route-element [routes]="routePath"></app-route-element>
</ng-template>
