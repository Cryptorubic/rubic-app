<ng-container *ngLet="buttonState$ | async as buttonState">
  <div class="round round_desktop" *ngIf="!isMobile">
    <div
      class="round__container"
      [ngClass]="{ round__container_disabled: round.isClosed || round.isAlreadyClaimed }"
    >
      <div class="round__header">
        <span class="round__number">Round #{{ round.roundNumber }}</span>
      </div>

      <div class="round__footer">
        <div class="round__info">
          <div class="round__info-date">
            {{ round.claimDate }}
          </div>
          <span class="round__info-amount">
            <img
              class="round__info-amount-icon"
              src="assets/images/rbc-white.png"
              alt="Confirmed RBC"
            />
            {{ round.isClosed ? '0' : round.claimAmount }} RBC
          </span>
        </div>
        <tui-loader [showLoader]="(loading$ | async) && !round.isClosed" [overlay]="true">
          <button
            class="round__button"
            tuiButton
            appearance="primary"
            [disabled]="round.isAlreadyClaimed || round.isClosed"
            type="button"
            size="m"
            (click)="!round.isAlreadyClaimed ? handleClick(buttonState.label) : null"
            [tuiHint]="round.isAlreadyClaimed ? hintTemplate : null"
            tuiHintAppearance="onDark"
          >
            {{ round.isClosed ? 'ClosedX' : (buttonState.translation | translate) }}
          </button>
        </tui-loader>
      </div>
    </div>
  </div>
  <div class="round round_mobile" *ngIf="isMobile">
    <div class="round__container round__container_mobile">
      <div
        class="round__info round__info_mobile"
        [ngClass]="{ round__info_mobile_disabled: round.isAlreadyClaimed }"
      >
        <div class="round__left round__left_mobile">
          <span
            class="round__round round__round_mobile"
            [ngClass]="{ round__round_mobile_disabled: round.isAlreadyClaimed }"
            >Round #{{ round.roundNumber }}</span
          >
          <div
            class="round__date round__date_mobile"
            [ngClass]="{ round__date_mobile_disabled: round.isAlreadyClaimed }"
          >
            {{ round.claimDate }}
          </div>
        </div>
        <div style="width: 100%">
          <div class="round__amount-wrapper round__amount-wrapper_mobile">
            <span
              class="round__amount round__amount_mobile"
              [ngClass]="{ round__amount_mobile_disabled: round.isAlreadyClaimed }"
            >
              <img src="assets/images/rbc-white.png" alt="Confirmed RBC" />
              {{ round.isClosed ? '0' : round.claimAmount }}
              RBC
            </span>
            <div
              *ngIf="!round.isClosed"
              class="round__claim-button-icon_mobile"
              [ngClass]="{ 'round__claim-button-icon_mobile_disabled': !round.isAlreadyClaimed }"
              [inlineSVG]="'assets/images/icons/exclamation-grey.svg'"
              [tuiHint]="round.isAlreadyClaimed ? hintTemplate : null"
              tuiHintAppearance="onDark"
            ></div>
          </div>
          <div
            class="round__claim-button round__claim-button_mobile"
            (click)="!round.isAlreadyClaimed ? handleClick(buttonState.label) : null"
            [ngClass]="{ 'round__claim-button_mobile_disabled': round.isAlreadyClaimed }"
          >
            <span>{{ round.isClosed ? 'Closed' : (buttonState.translation | translate) }}</span>
          </div>
        </div>
      </div>
    </div>
  </div>
</ng-container>

<ng-template #hintTemplate>
  <ng-container *ngIf="claimName === 'airdrop'">
    Your tokens have been already claimed, please check your wallet.
  </ng-container>
  <ng-container *ngIf="claimName === 'retrodrop'">
    Your tokens have already been successfully staked. Please review the Staking tab for further
    details.
  </ng-container>
</ng-template>
